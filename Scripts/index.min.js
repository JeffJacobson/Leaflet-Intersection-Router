requirejs.config({baseUrl:"Scripts",paths:{leaflet:"//cdn.leafletjs.com/leaflet-0.6.4/leaflet",markercluster:"Leaflet.markercluster/dist/leaflet.markercluster"},shim:{markercluster:["leaflet"]}});window.Worker?require(["leaflet","alertUtils","markercluster"],function(n,t){"use strict";function w(){function s(t,i){var r;return r=f.GetIcon(t),n.marker(i,{icon:r})}function h(n,i){i.bindPopup(t.createAlertContent(n))}function o(t){return n.geoJson(t,{pointToLayer:s,onEachFeature:h})}var u,i,f;return u=new Worker("Scripts/tasks/alerts_task.min.js"),f=new t.SignIcons,u.addEventListener("message",function(n){var t=n.data;t&&(i?(i.clearLayers(),i.addLayer(o(t))):(i=o(t).addTo(e),r.addOverlay(i,"Alerts")))},!1),u.postMessage("start"),u}function b(){function f(n){return n?n===1?"#0f0":n===2?"yellow":n===3?"red":n===4?"black":"gray":"white"}function e(t,i){return n.circleMarker(i,{radius:5,fillOpacity:1,color:"black",fillColor:f(t.properties.FlowReadingValue)})}function u(t){return n.geoJson(t,{pointToLayer:e})}var t,i;return i=new Worker("Scripts/tasks/trafficflow_task.min.js"),i.addEventListener("message",function(n){var i=n.data;i&&(t?(t.clearLayers(),t.addLayer(u(i))):(t=u(i),r.addOverlay(t,"Traffic Flow")))},!1),i.postMessage("start"),i}function k(){function e(n){var t,r,u,f,i;return t=document.createElement("div"),r=document.createElement("p"),r.textContent=n.properties.Title,t.appendChild(r),n.properties.Description&&(u=document.createElement("p"),u.innerText=n.properties.Description,t.appendChild(u)),n.properties.CameraOwner&&(f=["Courtesy of ",n.properties.CameraOwner].join(""),n.properties.OwnerURL?(i=document.createElement("a"),i.href=n.properties.OwnerURL):i=document.createElement("p"),i.innerText=f,t.appendChild(i)),t}function o(n){var r,i,t;r=n.popup._content;t=n.target.feature.properties;t.ImageURL&&r&&(i=document.createElement("img"),i.src=t.ImageURL,i.width=t.ImageWidth||null,i.height=t.ImageHeight||null,i.alt=t.Description||t.Title||"Camera Image",r.appendChild(i))}function s(t,i){return n.marker(i,{icon:u,title:t.properties.Title}).addOneTimeEventListener("popupopen",o)}function h(n,t){t.bindPopup(e(n))}function f(t){return n.geoJson(t,{pointToLayer:s,onEachFeature:h})}var t,i,u;return i=new Worker("Scripts/tasks/cameras_task.min.js"),u=n.icon({iconUrl:"images/icons/camera.png",iconSize:[30,22]}),i.addEventListener("message",function(i){var u=i.data;u&&(t?(t.clearLayers(),t.addLayer(f(u))):(t=new n.MarkerClusterGroup,t.addLayer(f(u)),r.addOverlay(t,"Cameras")))},!1),i.postMessage("start"),i}function d(n){var u,f,i,t,r;if(n&&n.properties){u=document.createElement("table");for(t in n.properties)n.properties.hasOwnProperty(t)&&(r=n.properties[t],r===null||r===""||t==="Longitude"||t==="Latitude"||/\w+(?:MaxAxle)|(?:In(?:(?:Inches)|(?:Pounds)))/i.test(t)&&!r||(f=u.insertRow(),i=document.createElement("th"),i.innerText=t,f.appendChild(i),i=f.insertCell(1),i.innerText=String(n.properties[t])))}return u}function g(t,i){return n.marker(i)}function nt(n,t){t.bindPopup(d(n))}function p(t,i){return n.geoJson(t,i||{pointToLayer:g,onEachFeature:nt})}function h(n,t,i,u,f){var e,o;return o=new Worker(n),o.addEventListener("message",function(n){var i=n.data;i&&(e?(e.clearLayers(),e.addLayer(p(i,f))):(e=p(i),r.addOverlay(e,t)))},!1),o.addEventListener("error",function(n){console.error("task error",n)}),o.postMessage({action:"start",type:i,ticks:u}),o}var e,o,c,s,l,a,v,y,u,f,i,r;u='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>';f=u+'<p>Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest<\/a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png"><\/p>';i=u+'<p>Tiles Courtesy of <a href="http://www.thunderforest.com/" target="_blank">Thunderforest<\/a><\/p>';o=n.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:u,maxZoom:18});c=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});s=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});s=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});l=n.tileLayer("http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});a=n.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});v=n.tileLayer("http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});y=n.tileLayer("http://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});e=n.map("map",{center:[47.413220330159461,-120.80566406246835],zoom:7,layers:[o]}).locate({setView:!0,maxZoom:16});r=n.control.layers({OpenStreetMap:o,"MapQuest OSM":c,"MapQest Open Aerial":s,OpenCycleMap:l,"OpenCycleMap Transport":a,"OpenCycleMap Landscape":v,"OpenCycleMap Outdoors":y}).addTo(e);w();b();k();h("Scripts/tasks/traffic_task.js","Travel Times","TravelTimes",6e4);h("Scripts/tasks/traffic_task.js","CV Restrictions","CVRestrictions",864e5);h("Scripts/tasks/traffic_task.js","Pass Conditions","MountainPassConditions",36e5)}):document.body.innerHTML="<p>This page uses <a href='http://caniuse.com/#feat=webworkers'>WebWorkers<\/a>, which your browser does not appear to support. Please upgrade to <a href='http://caniuse.com/#feat=webworkers'>one that does<\/a>.<\/p>";
//# sourceMappingURL=index.min.js.map