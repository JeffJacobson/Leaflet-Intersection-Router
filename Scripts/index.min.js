requirejs.config({baseUrl:"Scripts",paths:{leaflet:"//cdn.leafletjs.com/leaflet-0.6.4/leaflet",markercluster:"Leaflet.markercluster/dist/leaflet.markercluster"},shim:{markercluster:["leaflet"]}});window.Worker?require(["leaflet","alertUtils","markercluster"],function(n,t){"use strict";function w(){function f(n){var t,r,u,f,i;return t=document.createElement("div"),r=document.createElement("p"),r.textContent=n.properties.Title,t.appendChild(r),n.properties.Description&&(u=document.createElement("p"),u.innerText=n.properties.Description,t.appendChild(u)),n.properties.CameraOwner&&(f=["Courtesy of ",n.properties.CameraOwner].join(""),n.properties.OwnerURL?(i=document.createElement("a"),i.href=n.properties.OwnerURL):i=document.createElement("p"),i.innerText=f,t.appendChild(i)),t}function e(n){var r,i,t;r=n.popup._content;t=n.target.feature.properties;t.ImageURL&&r&&(i=document.createElement("img"),i.src=t.ImageURL,i.width=t.ImageWidth||null,i.height=t.ImageHeight||null,i.alt=t.Description||t.Title||"Camera Image",r.appendChild(i))}function o(t,i){return n.marker(i,{icon:r,title:t.properties.Title}).addOneTimeEventListener("popupopen",e)}function h(n,t){t.bindPopup(f(n))}function u(t){return n.geoJson(t,{pointToLayer:o,onEachFeature:h})}var t,i,r;return i=new Worker("Scripts/tasks/cameras_task.min.js"),r=n.icon({iconUrl:"images/icons/camera.png",iconSize:[30,22]}),i.addEventListener("message",function(i){var r=i.data;r&&(t?(t.clearLayers(),t.addLayer(u(r))):(t=new n.MarkerClusterGroup,t.addLayer(u(r)),s.addOverlay(t,"Cameras")))},!1),i.postMessage("start"),i}function b(n){var u,f,i,t,r;if(n&&n.properties){u=document.createElement("table");for(t in n.properties)n.properties.hasOwnProperty(t)&&(r=n.properties[t],r===null||r===""||t==="Longitude"||t==="Latitude"||/\w+(?:MaxAxle)|(?:In(?:(?:Inches)|(?:Pounds)))/i.test(t)&&!r||(f=u.insertRow(),i=document.createElement("th"),i.innerText=t,f.appendChild(i),i=f.insertCell(1),i.innerText=String(n.properties[t])))}return u}function k(t,i){return n.marker(i)}function d(n,t){t.bindPopup(b(n))}function r(t,i,r,u,f){var e,o,h;return o=new Worker(f||"Scripts/tasks/traffic_task.min.js"),h={pointToLayer:k,onEachFeature:d},o.addEventListener("message",function(i){var r=i.data;r&&(e?(e.clearLayers(),e.addLayer(n.geoJson(r,u||h))):(e=n.geoJson(r,u||h),s.addOverlay(e,t)))},!1),o.addEventListener("error",function(n){window.console&&window.console.error&&window.console.error("task error",n)}),o.postMessage({action:"start",type:i,ticks:r}),o}function g(n){return n?n===1?"#0f0":n===2?"yellow":n===3?"red":n===4?"black":"gray":"white"}var h,e,c,o,l,a,v,y,u,f,i,s,p;u='Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap<\/a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA<\/a>';f=u+'<p>Tiles Courtesy of <a href="http://www.mapquest.com/" target="_blank">MapQuest<\/a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png"><\/p>';i=u+'<p>Tiles Courtesy of <a href="http://www.thunderforest.com/" target="_blank">Thunderforest<\/a><\/p>';e=n.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:u,maxZoom:18});c=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});o=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});o=n.tileLayer("http://{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",{subdomains:["otile1","otile2","otile3","otile4"],attribution:f,maxZoom:18});l=n.tileLayer("http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});a=n.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});v=n.tileLayer("http://{s}.tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});y=n.tileLayer("http://{s}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png",{attribution:i,maxZoom:18});h=n.map("map",{center:[47.413220330159461,-120.80566406246835],zoom:7,layers:[e]}).locate({setView:!0,maxZoom:16});s=n.control.layers({OpenStreetMap:e,"MapQuest OSM":c,"MapQest Open Aerial":o,OpenCycleMap:l,"OpenCycleMap Transport":a,"OpenCycleMap Landscape":v,"OpenCycleMap Outdoors":y}).addTo(h);p=new t.SignIcons;r("Alerts","HighwayAlerts",6e4,{pointToLayer:function(t,i){var r;return r=p.GetIcon(t),n.marker(i,{icon:r})},onEachFeature:function(n,i){i.bindPopup(t.createAlertContent(n))}});r("Traffic Flow","TrafficFlow",6e4,{pointToLayer:function(t,i){return n.circleMarker(i,{radius:5,fillOpacity:1,color:"black",fillColor:g(t.properties.FlowReadingValue)})}},"Scripts/tasks/trafficflow_task.min.js");w();r("Travel Times","TravelTimes",6e4);r("CV Restrictions","CVRestrictions",864e5);r("Pass Conditions","MountainPassConditions",36e5)}):document.body.innerHTML="<p>This page uses <a href='http://caniuse.com/#feat=webworkers'>WebWorkers<\/a>, which your browser does not appear to support. Please upgrade to <a href='http://caniuse.com/#feat=webworkers'>one that does<\/a>.<\/p>";
//# sourceMappingURL=index.min.js.map